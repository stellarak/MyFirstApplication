<!doctype html?>
<html>
<head>
	<title> Create new contact</title>
	<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
    <script type="text/javascript" charset="utf-8" src="phonegap-3.1.0.js"></script>
	<script src="http://maps.googleapis.com/maps/api/js"></script>
	<link rel="stylesheet" type="text/css" href="mystyle.css">


 <script>
	// Wait for device API libraries to load
	    //
	    document.addEventListener("deviceready", onDeviceReady, false);
	    // device APIs are available

		function onDeviceReady() {
		document.getElementById("lastname").value = window.localStorage.getItem("Last_name");
		}
</script>


</head>



<body>

		<h1>Add New Contact</h1> <br>
	<form id="frm" action="form_action.asp">      <!--Create the  form -->

		<input type="text" name="firstname" id="First" placeholder="First name" class="text">
		<br><br>
		<input type="text" name="lastname" id="Last" placeholder="Last name" class="text">
  		<br><br>
  		<input type="text" name="mobile" id="Mob" placeholder="Mobile tel." class="text">
  		<br><br>
  	</form>
  		<a href="#" onClick="takephoto()"> <h4>Upload Photo</h4>
  		<br><br>
  		<img id="image" src="">
  		<br><br>
		<br><br>
		<button onclick="addcontact()" id="btn">Add Contact</button>
		<br><br>

<script>

			//This function is called when the user pushes the button "Add Contact"

		function addcontact() {

		window.localStorage.setItem("First_name",document.getElementById("frm").elements.item(0).value);
		window.localStorage.setItem("Last_name",document.getElementById("frm").elements.item(1).value);
		window.localStorage.setItem("Mobile",document.getElementById("frm").elements.item(2).value);
		window.localStorage.setItem("Photo",document.getElementById("image").value;
		window.location = "checklocation.html";

		}


 <script>
 		//This function is called when the user push the link "Upload photo" in the form
    function takephoto() {
      navigator.camera.getPicture(onSuccess, onFail,{
	          quality : 50,     //the quality is 50%
	          sourceType : Camera.PictureSourceType.CAMERA,
	          targetWidth: 200,     //Dimensions of the image on the screen
	          targetHeight: 200 });

    }
		// Once the user take the photo it is displayed on the screen
    function onSuccess(imageData)  {
    	var image = document.getElementById('image');
    	image.src = "data:image/jpg; base64, " + imageData;
    	image.style.display = 'block';
    }


			//If there is an error there is an alert
    function onFail(message) {
    	alert('Failed because: ' + message);
    }

</script>
</body>
</html>